var realBarsToPlay;var startTime;var wholeNoteTime;var halfNoteTime;var quarterNoteTime;var eighthNoteTime;var sixteenthNoteTime;var trioletwholeNoteTime;var triolethalfNoteTime;var trioletquarterNoteTime;var trioleteighthNoteTime;var trioletsixteenthNoteTime;var notesScheduledUntil;var nextScheduleIn;var drumSound;var drumSoundTernaire;var stepEncoursDisplay;var nextStepEnCoursTimer;var nextStepEnCoursTimer2;function sound_soundsSchedule(notesScheduledUntil,guitarNotesScheduledUntil){startTime=context.currentTime+0.100;if(notesScheduledUntil!=0)
startTime=notesScheduledUntil;if(pyramid)
{bpm=data[stepEncours].y;nextStepEnCoursTimer=setTimeout(function pl1(){stepEncours++},(startTime-currentTime)*1000);nextStepEnCoursTimer2=setTimeout(pyramid_updatePyramid,(startTime-currentTime)*1000)}
if(guitarNotesScheduledUntil==0)guitarNotesScheduledUntil=startTime;var tempo=bpm;realBarsToPlay=parseInt(bars);if(pyramid&&transition&&pyramidType!="S")realBarsToPlay=parseInt(bars)+1;if(firstBlankBar)
{realBarsToPlay=parseInt(bars)+1}
wholeNoteTime=(60/tempo)*4;halfNoteTime=(60/tempo)*2;quarterNoteTime=(60/tempo);eighthNoteTime=(60/tempo)/2;sixteenthNoteTime=(60/tempo)/4;trioletwholeNoteTime=wholeNoteTime/3;triolethalfNoteTime=halfNoteTime/3;trioletquarterNoteTime=quarterNoteTime/3;trioleteighthNoteTime=eighthNoteTime/3;trioletsixteenthNoteTime=sixteenthNoteTime/3;var fileToPlay;var currentBeat=0;var guitarTiming;for(var bar=0;bar<realBarsToPlay;bar++){var time=startTime+bar*4*quarterNoteTime;if(ternaire)time=startTime+bar*3*quarterNoteTime;var coutingBase=8
if(ternaire)coutingBase=6;if(!(firstBlankBar&&bar==0)){eightNoteReference.push({beat:0,time:time});eightNoteReference.push({beat:1,time:time+1*eighthNoteTime});eightNoteReference.push({beat:2,time:time+2*eighthNoteTime});eightNoteReference.push({beat:3,time:time+3*eighthNoteTime});eightNoteReference.push({beat:4,time:time+4*eighthNoteTime});eightNoteReference.push({beat:5,time:time+5*eighthNoteTime});eightNoteReference.push({beat:6,time:time+6*eighthNoteTime});eightNoteReference.push({beat:7,time:time+7*eighthNoteTime})}
if((pyramid&&transition&&pyramidType!="S"&&bar==0)||(firstBlankBar&&bar==0))
{if(ternaire)
{sound_playSound("drum",BUFFERS.DSTICK,time);sound_playSound("drum",BUFFERS.DRIDE,time);sound_playSound("drum",BUFFERS.DSTICK,time+1*quarterNoteTime);sound_playSound("drum",BUFFERS.DSTICK,time+2*quarterNoteTime)}
else{sound_playSound("drum",BUFFERS.DRIDE,time);sound_playSound("drum",BUFFERS.DSTICK,time);sound_playSound("drum",BUFFERS.DSTICK,time+1*quarterNoteTime);sound_playSound("drum",BUFFERS.DSTICK,time+2*quarterNoteTime);sound_playSound("drum",BUFFERS.DSTICK,time+3*quarterNoteTime)}}
else{if(ternaire)
{switch(drumSoundTernaire)
{case "Metronome":sound_playSound("drum",BUFFERS.DSTICK,time);sound_playSound("drum",BUFFERS.DSTICK,time+1*quarterNoteTime);sound_playSound("drum",BUFFERS.DSTICK,time+2*quarterNoteTime);break;case "Metronome2":sound_playSound("drum",BUFFERS.DBA1,time);sound_playSound("drum",BUFFERS.DSTICK,time);sound_playSound("drum",BUFFERS.DSTICK,time+1*quarterNoteTime);sound_playSound("drum",BUFFERS.DSTICK,time+2*quarterNoteTime);case "HiHat":sound_playSound("drum",BUFFERS.DBA1,time);sound_playSound("drum",BUFFERS.DHH1,time);sound_playSound("drum",BUFFERS.DHH2,time+1*quarterNoteTime);sound_playSound("drum",BUFFERS.DHH3,time+2*quarterNoteTime);break;case "Basic1":sound_playSound("drum",BUFFERS.DBA1,time);sound_playSound("drum",BUFFERS.DSN1,time+1*quarterNoteTime);sound_playSound("drum",BUFFERS.DSN2,time+2*quarterNoteTime);sound_playSound("drum",BUFFERS.DHH1,time);sound_playSound("drum",BUFFERS.DHH2,time+1*quarterNoteTime);sound_playSound("drum",BUFFERS.DHH3,time+2*quarterNoteTime);break;case "Basic2":sound_playSound("drum",BUFFERS.DBA1,time);sound_playSound("drum",BUFFERS.DSN1,time+1*quarterNoteTime);sound_playSound("drum",BUFFERS.DSN2,time+2*quarterNoteTime);sound_playSound("drum",BUFFERS.DHH1,time);sound_playSound("drum",BUFFERS.DHH2,time+1*quarterNoteTime);sound_playSound("drum",BUFFERS.DHH3,time+2*quarterNoteTime);sound_playSound("drum",BUFFERS.DHH2,time+1*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH2,time+3*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH3,time+5*eighthNoteTime);break;case "Grave":sound_playSound("drum",BUFFERS.DBA1,time);sound_playSound("drum",BUFFERS.DSN2,time+3*triolethalfNoteTime);sound_playSound("drum",BUFFERS.DHH2,time);sound_playSound("drum",BUFFERS.DHH2,time+1*triolethalfNoteTime);sound_playSound("drum",BUFFERS.DHH2,time+2*triolethalfNoteTime);sound_playSound("drum",BUFFERS.DHH2,time+3*triolethalfNoteTime);sound_playSound("drum",BUFFERS.DHH2,time+4*triolethalfNoteTime);sound_playSound("drum",BUFFERS.DHH3,time+5*triolethalfNoteTime);sound_playSound("drum",BUFFERS.DHIGH,time);sound_playSound("drum",BUFFERS.DHIGH,time+1*triolethalfNoteTime);sound_playSound("drum",BUFFERS.DHIGH,time+2*triolethalfNoteTime);sound_playSound("drum",BUFFERS.DHIGH,time+3*triolethalfNoteTime);sound_playSound("drum",BUFFERS.DHIGH,time+4*triolethalfNoteTime);sound_playSound("drum",BUFFERS.DHIGH,time+5*triolethalfNoteTime);sound_playSound("drum",BUFFERS.DFLOW,time+3*trioleteighthNoteTime);sound_playSound("drum",BUFFERS.DFLOW,time+7*trioleteighthNoteTime);sound_playSound("drum",BUFFERS.DFLOW,time+11*trioleteighthNoteTime);sound_playSound("drum",BUFFERS.DFLOW,time+15*trioleteighthNoteTime);sound_playSound("drum",BUFFERS.DFLOW,time+19*trioleteighthNoteTime);sound_playSound("drum",BUFFERS.DFLOW,time+23*trioleteighthNoteTime);break;default:sound_playSound("drum",BUFFERS.DBA1,time);sound_playSound("drum",BUFFERS.DSN1,time+1*trioletwholeNoteTime);sound_playSound("drum",BUFFERS.DSN2,time+2*trioletwholeNoteTime);sound_playSound("drum",BUFFERS.DHH1,time);sound_playSound("drum",BUFFERS.DHH2,time+1*trioletwholeNoteTime);sound_playSound("drum",BUFFERS.DHH3,time+2*trioletwholeNoteTime);sound_playSound("drum",BUFFERS.DHH2,time+1*triolethalfNoteTime);sound_playSound("drum",BUFFERS.DHH2,time+3*triolethalfNoteTime);sound_playSound("drum",BUFFERS.DHH3,time+5*triolethalfNoteTime);break}}
else{switch(drumSound)
{case "Metronome":sound_playSound("drum",BUFFERS.DSTICK,time);sound_playSound("drum",BUFFERS.DSTICK,time+1*quarterNoteTime);sound_playSound("drum",BUFFERS.DSTICK,time+2*quarterNoteTime);sound_playSound("drum",BUFFERS.DSTICK,time+3*quarterNoteTime);break;case "Highway":sound_playSound("drum",BUFFERS.DHH1,time);sound_playSound("drum",BUFFERS.DHH2,time+1*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH3,time+2*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH4,time+3*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH5,time+4*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH6,time+5*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH7,time+6*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH8,time+7*eighthNoteTime);sound_playSound("drum",BUFFERS.DBA1,time);sound_playSound("drum",BUFFERS.DBA2,time+2*quarterNoteTime);sound_playSound("drum",BUFFERS.DSN1,time+1*quarterNoteTime);sound_playSound("drum",BUFFERS.DSN2,time+3*quarterNoteTime);break;case "Funky":sound_playSound("drum",BUFFERS.DHH1,time);sound_playSound("drum",BUFFERS.DHH2,time+1*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH3,time+2*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH4,time+3*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH5,time+4*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DOHIT,time+5*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH7,time+6*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DOHIT,time+7*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH1,time+8*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH2,time+9*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH3,time+10*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH4,time+11*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH5,time+12*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DOHIT,time+13*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH7,time+14*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH8,time+15*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DSN1,time+4*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DSN2,time+7*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DSN2,time+9*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DSN2,time+11*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DSN1,time+12*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DSN2,time+15*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DBA1,time);sound_playSound("drum",BUFFERS.DBA2,time+2*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DBA1,time+10*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DBA2,time+13*sixteenthNoteTime);break;case "Blue":sound_playSound("drum",BUFFERS.DHH1,time);sound_playSound("drum",BUFFERS.DHH3,time+2*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH5,time+4*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH7,time+6*eighthNoteTime);sound_playSound("drum",BUFFERS.DBA1,time);sound_playSound("drum",BUFFERS.DBA2,time+2*quarterNoteTime);sound_playSound("drum",BUFFERS.DSN1,time+1*quarterNoteTime);sound_playSound("drum",BUFFERS.DSN2,time+7*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DSN2,time+3*quarterNoteTime);break;case "Life":sound_playSound("drum",BUFFERS.DHH1,time);sound_playSound("drum",BUFFERS.DHH3,time+2*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH5,time+4*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH7,time+6*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH1,time+6*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH2,time+7*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH3,time+8*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH4,time+9*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DOHIT,time+10*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DOHIT,time+12*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DBA1,time);sound_playSound("drum",BUFFERS.DBA2,time+1*eighthNoteTime);sound_playSound("drum",BUFFERS.DSN1,time+1*quarterNoteTime);sound_playSound("drum",BUFFERS.DSN2,time+6*eighthNoteTime);break;case "Metronome2":sound_playSound("drum",BUFFERS.DSTICK,time);sound_playSound("drum",BUFFERS.DBA1,time);sound_playSound("drum",BUFFERS.DSTICK,time+1*quarterNoteTime);sound_playSound("drum",BUFFERS.DSTICK,time+2*quarterNoteTime);sound_playSound("drum",BUFFERS.DSTICK,time+3*quarterNoteTime);break;case "Lost":sound_playSound("drum",BUFFERS.DHH1,time);sound_playSound("drum",BUFFERS.DHH2,time+1*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH3,time+2*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH4,time+3*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH5,time+4*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH6,time+5*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH7,time+6*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH8,time+7*eighthNoteTime);sound_playSound("drum",BUFFERS.DBA1,time);sound_playSound("drum",BUFFERS.DBA2,time+2*eighthNoteTime);sound_playSound("drum",BUFFERS.DBA1,time+4*eighthNoteTime);sound_playSound("drum",BUFFERS.DHIGH,time+3*eighthNoteTime);sound_playSound("drum",BUFFERS.DFLOW,time+6*eighthNoteTime);break;case "Factory":sound_playSound("drum",BUFFERS.DHH1,time);sound_playSound("drum",BUFFERS.DHH2,time+1*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH3,time+2*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH4,time+3*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH5,time+4*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH6,time+5*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH7,time+6*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH8,time+7*eighthNoteTime);sound_playSound("drum",BUFFERS.DBA1,time);sound_playSound("drum",BUFFERS.DSN1,time+1*eighthNoteTime);sound_playSound("drum",BUFFERS.DBA2,time+2*eighthNoteTime);sound_playSound("drum",BUFFERS.DSN2,time+3*eighthNoteTime);sound_playSound("drum",BUFFERS.DBA1,time+4*eighthNoteTime);sound_playSound("drum",BUFFERS.DSN1,time+5*eighthNoteTime);sound_playSound("drum",BUFFERS.DBA2,time+6*eighthNoteTime);sound_playSound("drum",BUFFERS.DSN2,time+7*eighthNoteTime);break;case "Joey":sound_playSound("drum",BUFFERS.DHH1,time);sound_playSound("drum",BUFFERS.DHH2,time+1*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH3,time+2*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH4,time+3*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH5,time+4*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH6,time+5*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH7,time+6*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH8,time+7*eighthNoteTime);sound_playSound("drum",BUFFERS.DBA1,time);sound_playSound("drum",BUFFERS.DBA2,time+1*eighthNoteTime);sound_playSound("drum",BUFFERS.DBA1,time+7*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DBA2,time+9*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DBA1,time+10*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DSN1,time+2*eighthNoteTime);sound_playSound("drum",BUFFERS.DSN2,time+6*eighthNoteTime);break;case "Pilgrim":sound_playSound("drum",BUFFERS.DHH1,time);sound_playSound("drum",BUFFERS.DHH2,time+1*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH3,time+2*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH4,time+3*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH5,time+4*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH6,time+5*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH7,time+6*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH8,time+7*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH1,time+8*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH2,time+9*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH3,time+10*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH4,time+11*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH5,time+12*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH6,time+13*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH7,time+14*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DHH8,time+15*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DBA1,time);sound_playSound("drum",BUFFERS.DBA1,time+1*quarterNoteTime);sound_playSound("drum",BUFFERS.DBA1,time+2*quarterNoteTime);sound_playSound("drum",BUFFERS.DBA1,time+3*quarterNoteTime);sound_playSound("drum",BUFFERS.DSN1,time+3*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DSN2,time+6*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DSN1,time+11*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DSN2,time+14*sixteenthNoteTime);break;case "Master":sound_playSound("drum",BUFFERS.DHH1,time);sound_playSound("drum",BUFFERS.DHH2,time+1*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH3,time+2*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH4,time+3*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH5,time+4*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH6,time+5*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH7,time+6*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH8,time+7*eighthNoteTime);sound_playSound("drum",BUFFERS.DBA1,time);sound_playSound("drum",BUFFERS.DBA2,time+2*quarterNoteTime);sound_playSound("drum",BUFFERS.DBA1,time+5*eighthNoteTime);sound_playSound("drum",BUFFERS.DSN1,time+1*quarterNoteTime);sound_playSound("drum",BUFFERS.DSN2,time+3*quarterNoteTime);break;case "Stone":sound_playSound("drum",BUFFERS.DHH1,time);sound_playSound("drum",BUFFERS.DHH2,time+1*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH3,time+2*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH4,time+3*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH5,time+4*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH6,time+5*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH7,time+6*eighthNoteTime);sound_playSound("drum",BUFFERS.DHH8,time+7*eighthNoteTime);sound_playSound("drum",BUFFERS.DBA1,time);sound_playSound("drum",BUFFERS.DBA2,time+1*eighthNoteTime);sound_playSound("drum",BUFFERS.DBA1,time+2*eighthNoteTime);sound_playSound("drum",BUFFERS.DBA2,time+3*eighthNoteTime);sound_playSound("drum",BUFFERS.DBA1,time+4*eighthNoteTime);sound_playSound("drum",BUFFERS.DBA2,time+5*eighthNoteTime);sound_playSound("drum",BUFFERS.DBA1,time+6*eighthNoteTime);sound_playSound("drum",BUFFERS.DBA2,time+7*eighthNoteTime);sound_playSound("drum",BUFFERS.DSN1,time+1*eighthNoteTime);sound_playSound("drum",BUFFERS.DSN2,time+3*eighthNoteTime);sound_playSound("drum",BUFFERS.DSN1,time+5*eighthNoteTime);sound_playSound("drum",BUFFERS.DSN2,time+13*sixteenthNoteTime);sound_playSound("drum",BUFFERS.DOHIT,time+7*eighthNoteTime);break;default:sound_playSound("drum",BUFFERS.DSTICK,time);sound_playSound("drum",BUFFERS.DSTICK,time+1*quarterNoteTime);sound_playSound("drum",BUFFERS.DSTICK,time+2*quarterNoteTime);sound_playSound("drum",BUFFERS.DSTICK,time+3*quarterNoteTime);break}}}}
if(notesScheduledUntil!=0)
nextScheduleIn=((((realBarsToPlay/2)*coutingBase*eighthNoteTime))+(((realBarsToPlay/2)*coutingBase*eighthNoteTimeOLD)))*1000;else nextScheduleIn=(realBarsToPlay*coutingBase*eighthNoteTime/2)*1000;notesScheduledUntil=startTime+realBarsToPlay*coutingBase*eighthNoteTime;eighthNoteTimeOLD=eighthNoteTime;if(!pyramid){drillToSchedule=drills_prepareDrill()}
BUFFERS_TO_LOAD={};for(i=drillcounterSOUND;i<drillToSchedule.length;i++){for(j=notecounterSOUND;j<drillToSchedule[i].length;j++){if(currentBeat<(bars*2))
{fileToPlay=drillToSchedule[i][j].fileToPlay;BUFFERS_TO_LOAD[fileToPlay]="sounds/guitar/"+fileToPlay+".mp3";guitarTiming=startTime+(currentBeat*halfNoteTime)+quarterNoteTime;drillToSchedule[i][j].timing=guitarTiming;playedNoteReference.push({note:fileToPlay,time:guitarTiming})}
currentBeat++}}
boolLoadBuffer=!0;currentBeat=0;buffers_loadBuffers();var len=sourceTable.length;if(pyramidType=="S")stepEncours=1;if((!pyramid)||(stepEncours<nbSteps))
{schedulingTimer=setTimeout(function pl(){sound_soundsSchedule(notesScheduledUntil,guitarNotesScheduledUntil)},nextScheduleIn)}
var i=0;while(i<sourceTable.length)
{if(sourceTable[i].tim<context.currentTime-1)
{sourceTable.splice(i,1)}
else{i++}}}
function scheduleInstru()
{var currentBeat=0;var fileToPlay;var guitarTiming;for(i=drillcounterSOUND;i<drillToSchedule.length;i++){for(j=notecounterSOUND;j<drillToSchedule[i].length;j++){if(currentBeat<(bars*2))
{fileToPlay=drillToSchedule[i][j].fileToPlay;guitarTiming=startTime+(currentBeat*halfNoteTime)+quarterNoteTime;if(firstBlankBar)guitarTiming=guitarTiming+wholeNoteTime;sound_playSound("guitar",BUFFERS[fileToPlay],guitarTiming);drillToSchedule[i][j].timing=guitarTiming;playedNoteReference.push({note:fileToPlay,time:guitarTiming});notecounterSOUND++;if(notecounterSOUND>=drillToSchedule[drillcounterSOUND].length){notecounterSOUND=0;drillcounterSOUND++}}
currentBeat++}}
if(infiniteDrill==!0)
{notecounterSOUND=0;drillcounterSOUND=0}
firstBlankBar=!1}
var sourceTable=new Array();function sound_playSound(instru,buffer,time){var source=context.createBufferSource();source.buffer=buffer;var gainNode=context.createGain();source.connect(gainNode);gainNode.connect(context.destination);if(instru=="drum")
{gainNode.gain.value=drumVolume}
if(instru=="guitar")
{gainNode.gain.value=guitarVolume}
if(!source.start)
source.start=source.noteOn;source.start(time);sourceTable.push({src:source,inst:instru,tim:time,buf:buffer})}